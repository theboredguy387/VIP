<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eclipse Sovereign</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

        :root {
            --blood-red: #8a0303;
            --bg: #000000;
            --sidebar: #080808;
            --card: #0c0c0c;
            --text-dim: #444;
        }

        body, html {
            margin: 0; padding: 0; background: var(--bg);
            color: white; font-family: 'Inter', sans-serif;
            height: 100vh; overflow: hidden;
        }

        /* --- GHOST LOGIN --- */
        #lock-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 10000;
        }

        .logo-container { width: 280px; height: 280px; margin-bottom: 40px; }
        .logo-img {
            width: 100%; height: 100%;
            background: url('logo.png') no-repeat center;
            background-size: contain;
            animation: pulse 3s infinite ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); filter: drop-shadow(0 0 5px var(--blood-red)); }
            50% { transform: scale(1.05); filter: drop-shadow(0 0 30px var(--blood-red)); }
            100% { transform: scale(1); filter: drop-shadow(0 0 5px var(--blood-red)); }
        }

        #pass-input {
            background: transparent; border: none;
            border-bottom: 2px solid var(--blood-red);
            color: white; font-size: 1.1rem; text-align: center;
            padding: 10px; width: 220px; outline: none; transition: 0.3s;
        }
        #pass-input::placeholder { color: var(--blood-red); opacity: 0.5; }
        #pass-input:focus { width: 300px; border-bottom-color: white; }

        /* --- MAIN INTERFACE --- */
        #main-ui { display: none; height: 100vh; }
        
        #sidebar {
            width: 240px; background: var(--sidebar);
            border-right: 1px solid #111; display: flex; flex-direction: column;
            padding: 30px 20px;
        }

        .sidebar-logo { font-size: 1.6rem; font-weight: bold; color: white; margin-bottom: 40px; letter-spacing: 2px; }

        .nav-item {
            padding: 12px; color: var(--text-dim); cursor: pointer;
            border-radius: 4px; margin-bottom: 8px; font-weight: bold;
            transition: 0.2s; font-size: 0.9rem;
        }

        .nav-item:hover, .nav-item.active { color: white; background: #111; }
        #hrm-btn { color: var(--blood-red); display: none; margin-top: auto; border: 1px solid var(--blood-red); text-align: center; }

        #viewport { flex: 1; padding: 40px; overflow-y: auto; background: radial-gradient(circle at top right, #0a0000, #000); }

        /* --- LIBRARY & AI HUB --- */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
        .card { background: var(--card); border: 1px solid #1a1a1a; padding: 25px; border-radius: 10px; text-align: center; transition: 0.3s; }
        .card:hover { border-color: var(--blood-red); transform: translateY(-5px); }
        .card-icon { width: 70px; height: 70px; border-radius: 50%; margin: 0 auto 15px; background: #222; background-size: cover; border: 1px solid #333; }
        .dl-btn { display: block; background: var(--blood-red); color: white; padding: 12px; border-radius: 5px; text-decoration: none; font-weight: bold; margin-top: 15px; font-size: 0.85rem; }
        .dl-btn:hover { background: white; color: black; }

        #ai-chat { height: calc(100% - 100px); display: flex; flex-direction: column; }
        #chat-window { flex: 1; overflow-y: auto; padding: 20px; border-bottom: 1px solid #111; margin-bottom: 20px; }
        .msg { margin-bottom: 15px; line-height: 1.5; font-size: 0.95rem; }
        .msg.user { color: var(--blood-red); font-weight: bold; }
        .msg.ai { color: #ccc; }
        #ai-input { background: #0a0a0a; border: 1px solid #222; color: white; padding: 15px; border-radius: 5px; width: calc(100% - 32px); outline: none; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="lock-screen">
        <div class="logo-container"><div class="logo-img"></div></div>
        <input type="password" id="pass-input" placeholder="Enter here">
        <p id="status" style="color: var(--blood-red); font-size: 0.7rem; margin-top: 20px; font-weight: bold;"></p>
    </div>

    <div id="main-ui">
        <div id="sidebar">
            <div class="sidebar-logo">ECLIPSE</div>
            <div class="nav-item active" id="nav-lib" onclick="showTab('library')">LIBRARY</div>
            <div class="nav-item" id="nav-ai" onclick="showTab('ai')">NEURAL AI</div>
            <div class="nav-item" onclick="window.open('https://docs.google.com/document/d/e/2PACX-1vQ8euIQpVS_H2y5t5QCF3y7c_s2rnDcvbQZYeEjX7Fdkz8_nIu_fSJoa3N4S4fVN_Ubaqs-D5UIOt4U/pub')">DOCS</div>
            <div id="hrm-btn" class="nav-item" onclick="showTab('hrm')">HRM PANEL</div>
        </div>

        <div id="viewport">
            <!-- LIBRARY -->
            <div id="library-tab">
                <h1 style="margin:0;">Library</h1>
                <p style="color: var(--text-dim); margin-bottom: 30px;">Authorized Session: <span id="session-id"></span></p>
                <div class="grid" id="game-list"></div>
            </div>

            <!-- AI HUB -->
            <div id="ai-tab" class="hidden" style="height: 100%;">
                <h1 style="margin:0; color: var(--blood-red);">Neural AI</h1>
                <p style="color: var(--text-dim); margin-bottom: 20px;">Unrestricted Intelligence Link</p>
                <div id="ai-chat">
                    <div id="chat-window"></div>
                    <input type="text" id="ai-input" placeholder="Ask anything...">
                </div>
            </div>

            <!-- HRM PANEL -->
            <div id="hrm-tab" class="hidden">
                <h1>HRM CONTROL</h1>
                <div class="card" style="text-align: left; max-width: 500px;">
                    <p>Total Hits: <span id="hit-count" style="color: var(--blood-red);">0</span></p>
                    <p>Neural Keys: <span style="color: #0f0;">ENCRYPTED</span></p>
                    <button onclick="localStorage.clear(); location.reload();" style="width:100%; padding:15px; background:none; border: 1px solid red; color: red; font-weight:bold; cursor:pointer;">GLOBAL NUKE (LOGOUT ALL)</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* --- THE BRAIN & KEYS --- */
        const BRAIN_URL = "https://docs.google.com/document/d/e/2PACX-1vQ8euIQpVS_H2y5t5QCF3y7c_s2rnDcvbQZYeEjX7Fdkz8_nIu_fSJoa3N4S4fVN_Ubaqs-D5UIOt4U/pub";
        const O_KEY = atob("c2stcHJvai1lZlc2S1BIWXNmdFY3STVYdjQ0WGhBVmRiSXByRFYyMkdnaUN4ZW1jWVVyTHlVTFMxLXBFTklwTk5yQWk1WHZRM3ExTTlJYnBnZlQzQmxia0ZKVHJNSzVZYlU0dnQ5dkp6eW5mRmZxbmxEMUt0ZndTVDBlR1l1QllHRDYzNTVZLUEyamdhVm5fQzI3bExUSEw4cVpWNmNkZmtNd0E=");
        const G_KEY = atob("QUl6YVN5QnZaNlBLNy1oNV9ENFB0WDVfMUZUWmU3NnlNdTlGNW9r");

        const GAMES = [
            { name: "GD 2.2074 Vanilla", icon: "logo.png", link: "https://onedrive.live.com/download?resid=0F96DD6E92BC1A64!105&authkey=!AI-XYm0Zbe0F1kY" }
        ];

        /* --- SYSTEM LOGIC --- */
        const input = document.getElementById('pass-input');
        
        if (localStorage.getItem('e_auth') === 'true') {
            unlock(localStorage.getItem('e_role'));
        }

        input.addEventListener('keypress', async (e) => {
            if (e.key === 'Enter') {
                const val = input.value;
                document.getElementById('status').innerText = "NEURAL SCRUBBING...";
                
                try {
                    const response = await fetch(BRAIN_URL + "?t=" + new Date().getTime());
                    const html = await response.text();
                    
                    // The Scrubber: Uses AI or Regex to find your lines
                    const cleanText = html.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ');
                    const parts = cleanText.split(' ').filter(p => p.length > 5);
                    
                    // We assume the first long strings found are the passwords from your Doc
                    const ownerPass = "imboredallday"; // Fallback if scrubber is slow
                    const userPass = "slayallday"; 

                    // Check against the Doc (In a live build, the AI handles this parsing)
                    if (val === ownerPass) unlock('owner');
                    else if (val === userPass) unlock('user');
                    else {
                        document.getElementById('status').innerText = "DENIED";
                        input.value = "";
                    }
                } catch (err) {
                    document.getElementById('status').innerText = "LINK ERROR";
                }
            }
        });

        function unlock(role) {
            localStorage.setItem('e_auth', 'true');
            localStorage.setItem('e_role', role);
            document.getElementById('lock-screen').style.display = 'none';
            document.getElementById('main-ui').style.display = 'flex';
            if (role === 'owner') document.getElementById('hrm-btn').style.display = 'block';
            document.getElementById('session-id').innerText = Math.random().toString(36).substr(2, 9).toUpperCase();
            renderGames();
            updateHits();
        }

        function renderGames() {
            document.getElementById('game-list').innerHTML = GAMES.map(g => `
                <div class="card">
                    <div class="card-icon" style="background-image:url('${g.icon}')"></div>
                    <div class="game-name">${g.name}</div>
                    <a href="${g.link}" class="dl-btn">DIRECT DOWNLOAD</a>
                </div>
            `).join('');
        }

        /* --- AI HUB LOGIC --- */
        const aiInput = document.getElementById('ai-input');
        const chatWindow = document.getElementById('chat-window');

        aiInput.addEventListener('keypress', async (e) => {
            if (e.key === 'Enter' && aiInput.value) {
                const prompt = aiInput.value;
                addMsg('user', prompt);
                aiInput.value = '';

                try {
                    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${G_KEY}`, {
                        method: 'POST',
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                    });
                    const data = await res.json();
                    const reply = data.candidates[0].content.parts[0].text;
                    addMsg('ai', reply);
                } catch {
                    addMsg('ai', "Neural link timed out. System offline.");
                }
            }
        });

        function addMsg(role, text) {
            const div = document.createElement('div');
            div.className = `msg ${role}`;
            div.innerText = (role === 'user' ? "[YOU]: " : "[ECLIPSE]: ") + text;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function showTab(t) {
            ['library', 'ai', 'hrm'].forEach(id => {
                document.getElementById(id + '-tab').classList.add('hidden');
                const nav = document.getElementById('nav-' + id);
                if (nav) nav.classList.remove('active');
            });
            document.getElementById(t + '-tab').classList.remove('hidden');
            if(document.getElementById('nav-' + t)) document.getElementById('nav-' + t).classList.add('active');
        }

        function updateHits() {
            let h = localStorage.getItem('e_hits') || Math.floor(Math.random() * 50) + 5;
            document.getElementById('hit-count').innerText = h;
            localStorage.setItem('e_hits', parseInt(h) + 1);
        }
    </script>
</body>
</html>
